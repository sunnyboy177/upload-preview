<!DOCTYPE html>
<html>
<head>
<title>HTML5 上传图片前本地预览</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script src="jq.js"></script>
</head>
<body>
<h3>HTML5 上传图片前本地预览</h3>
	<div><img src="" id="img0" width="400" height="400"></div>
	<div><input type="file"  id="file0" /><br></div>
<script>	
$("#file0").change(function(){
	var objUrl = getObjectURL(this.files[0]) ;
	console.log("objUrl = "+objUrl) ;
	if (objUrl) {
		$("#img0").attr("src", objUrl) ;
	}
}) ;

function getObjectURL(file) {
	var url = null ; 
	if (window.createObjectURL!=undefined) { // basic
		url = window.createObjectURL(file) ;
	} else if (window.URL!=undefined) { // mozilla(firefox)
		url = window.URL.createObjectURL(file) ;
	} else if (window.webkitURL!=undefined) { // webkit or chrome
		url = window.webkitURL.createObjectURL(file) ;
	}
	return url ;
}
</script>
</body>
</html>